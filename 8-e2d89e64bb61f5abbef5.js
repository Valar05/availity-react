(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{mIeF:function(e,r,n){"use strict";n.r(r);n("1c7q"),n("Zrjq"),n("jr56"),n("abGl"),n("gZHo"),n("Fdmb"),n("Ir+3");var t=n("mXGw"),a=n.n(t),c=n("8Jek"),s=n.n(c),i=n("eFpI"),o=n("RnEY"),l=n("oG6R"),u=(n("dtV+"),n("wDqy"),n("yvkl"),n("1M3q")),p=n.n(u),d=(n("wcNg"),n("bHFo")),f=n("Mblp");function m(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function g(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?m(Object(n),!0).forEach((function(r){b(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function b(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var y={spaces:[],loading:!0,error:null},v={SPACES:function(e,r){return{spaces:r.spaces||[],error:null,loading:!1}},ERROR:function(e,r){return g({},e,{loading:!1,error:r.error})},LOADING:function(e,r){var n=r.loading;return g({},e,{loading:void 0!==n?n:!e.loading})}},O=function(e,r){return v[r.type](e,r)};function h(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function j(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?h(Object(n),!0).forEach((function(r){w(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function w(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function k(e,r,n,t,a,c,s){try{var i=e[c](s),o=i.value}catch(l){return void n(l)}i.done?r(o):Promise.resolve(o).then(t,a)}function I(e){return function(){var r=this,n=arguments;return new Promise((function(t,a){var c=e.apply(r,n);function s(e){k(c,t,a,s,i,"next",e)}function i(e){k(c,t,a,s,i,"throw",e)}s(void 0)}))}}var P=function(){var e=I(p.a.mark((function e(r,n,t,a){var c,s,i,o,l,u,f;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a&&(a=[]),n){e.next=3;break}throw new Error("clientId is required");case 3:return e.next=5,d.d.create({query:r,variables:t},{headers:{"X-Client-ID":n}});case 5:if(c=e.sent,s=c.data.data.spaces,i=s.totalCount,o=s.page,l=s.perPage,u=a.concat(s.spaces),!(i>o*l)){e.next=12;break}return f=j({},t,{page:o+1}),e.abrupt("return",P(r,n,f,u));case 12:return e.abrupt("return",u);case 13:case"end":return e.stop()}}),e)})));return function(r,n,t){return e.apply(this,arguments)}}(),E=Object(t.createContext)(),x=function(){return Object(t.useContext)(E)},N=function(e){var r=e.query,n=e.variables,c=e.clientId,s=e.spaceIds,i=e.payerIds,o=e.children,l=e.spaces,u=Object(t.useReducer)(O,y),d=u[0],m=d.spaces,g=d.loading,b=d.error,v=u[1];Object(f.a)(I(p.a.mark((function e(){var t,a,o,u,d,f,g;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,v({type:"LOADING",loading:!0}),t=s.filter((function(e,r){return s.indexOf(e)===r})).filter((function(e){return!m.some((function(r){return r&&r.id===e}))})).filter((function(e){return!l.some((function(r){return r&&r.id===e}))})),a=i.filter((function(e,r){return i.indexOf(e)===r})).filter((function(e){return!m.some((function(r){return r&&r.payerIDs&&r.payerIDs.some((function(r){return r===e}))}))})).filter((function(e){return!l.some((function(r){return r&&r.payerIDs&&r.payerIDs.some((function(r){return r===e}))}))})),o=[],!(t.length>0)){e.next=11;break}return u=j({},n,{ids:t}),e.next=9,P(r,c,u,m);case 9:d=e.sent,o=o.concat(d);case 11:if(!(a.length>0)){e.next=17;break}return f=j({},n,{payerIDs:a}),e.next=15,P(r,c,f,m);case 15:g=e.sent,o=o.concat(g);case 17:v({type:"SPACES",spaces:o}),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),v({type:"ERROR",error:e.t0.message});case 23:case"end":return e.stop()}}),e,null,[[0,20]])}))),[i,s]);var h=function(e){var r=["images","metadata","colors","icons","mapping"];return e.reduce((function(e,n){return r.forEach((function(e){n[e]&&Array.isArray(n[e])&&(n[e]=n[e].reduce((function(e,r){var n=r.name,t=r.value;return e[n]=t,e}),{}))})),e.push(n),e}),[])}(m.concat(l));return a.a.createElement(E.Provider,{value:{spaces:h,loading:g,error:b}},"function"==typeof o?o({spaces:h,loading:g,error:b}):o)},D=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=Object(t.useContext)(E)||{},c=a.spaces,s=void 0===c?[]:c,i=!r||0===r.length,o=r&&1===r.length&&void 0===r[0];o&&s.length>1&&console.warn("You did not pass an ID in to find a space, and there is more than 1 space in the space array. Returning all.");var l=i||o;if(l)return s;var u=r.map((function(e){var r=s.filter((function(r){return r.id===e}))[0];r||(r=s.filter((function(r){return(r.payerIDs||[]).some((function(r){return r===e}))}))[0]);return r}));return u};N.defaultProps={query:"\n    query($ids: [String!], $payerIDs: [String!], $types: [String!], $page: Int){\n      spaces(ids: $ids, payerIDs: $payerIDs, types: $types, page: $page){\n        totalCount\n        perPage\n        page\n        spaces{\n          id\n          name\n          description\n          link {\n            url\n          }\n          payerIDs\n          parentIDs\n          metadata{\n            name\n            value\n          }\n          images{\n            name\n            value\n          }\n          url\n        }\n      }\n    }\n  ",variables:{types:["space"]},spaceIds:[],payerIds:[],spaces:[]};var C=N,R=n("FpsE"),S=n.n(R),A=n("RnPE"),T=n.n(A),q=n("BjK/"),$=n.n(q);function F(e,r){if(null==e)return{};var n,t,a={},c=Object.keys(e);for(t=0;t<c.length;t++)n=c[t],r.indexOf(n)>=0||(a[n]=e[n]);return a}var G=function(e){var r=e.skeletonProps,n=F(e,["skeletonProps"]);return a.a.createElement("span",n,a.a.createElement(S.a,r))};G.defaultProps={skeletonProps:{height:"100%"}};var U=function(e){var r=e.spaceId,n=e.payerId,t=e.imageType,c=e.fallback,s=e.skeletonProps,i=F(e,["spaceId","payerId","imageType","fallback","skeletonProps"]),o=D(r||n)[0],l=void 0===o?{}:o,u=(x()||{}).loading,p=r||n||l.id,d=$()(l,t);return!d&&u?a.a.createElement(G,Object.assign({"data-testid":"space-"+t+"-"+p+"-loading",skeletonProps:s},i)):(d||u||!c||(d=c),d&&p?a.a.createElement(T.a,Object.assign({"data-testid":"space-"+t+"-"+p,src:d,alt:"Space "+t,loader:a.a.createElement(G,Object.assign({"data-testid":"space-"+t+"-"+p,skeletonProps:s},i))},i)):null)};U.defaultProps={imageType:"url"};U.create=function(e){var r,n=function(r){return a.a.createElement(U,Object.assign({},e,r))};return n.displayName="Spaces"+((r=e.imageType)&&r.charAt(0).toUpperCase()+r.slice(1)),n};var L=U,J=n("m1fY"),M=n("LO0j"),Y=n.n(M);var H=function(e){var r=e.styled,n=e.spaceId,t=e.markdown,c=function(e,r){if(null==e)return{};var n,t,a={},c=Object.keys(e);for(t=0;t<c.length;t++)n=c[t],r.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["styled","spaceId","markdown"]),s=D(n)[0],i=void 0===s?{}:s,o=i.description;if(o){var l=t?a.a.createElement(Y.a,{source:o}):o;return a.a.createElement(J.b,Object.assign({"data-testid":"spaces-disclaimer-"+(n||i.id),styled:r},c),l)}return null};H.defaultProps={markdown:!1};var V=function(e){var r=e.spaceId,n=e.markdown,t=function(e,r){if(null==e)return{};var n,t,a={},c=Object.keys(e);for(t=0;t<c.length;t++)n=c[t],r.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["spaceId","markdown"]),c=D(r)[0],s=void 0===c?{}:c,i=s.description;if(i){var o=n?a.a.createElement(Y.a,{source:i}):i;return a.a.createElement(J.a,Object.assign({"data-testid":"spaces-agreement-"+(r||s.id)},t),o)}return null};V.defaultProps={markdown:!1};var X=L.create({imageType:"images.logo"}),Z=(L.create({imageType:"images.tile"}),L.create({imageType:"images.billboard"}),C);function B(e,r){if(null==e)return{};var n,t,a={},c=Object.keys(e);for(t=0;t<c.length;t++)n=c[t],r.indexOf(n)>=0||(a[n]=e[n]);return a}var K=function(e){var r=e.payerId,n=e.spaceName,c=e.spaceId,u=e.children,p=e.appName,d=e.appAbbr,f=e.iconColor,m=e.branded,g=e.crumbs,b=e.feedback,y=e.feedbackProps,v=e.titleProps,O=v.className,h=B(v,["className"]),j=e.renderRightContent,w=e.renderRightClassName,k=e.component,I=e.tag,P=e.clientId,E=e.iconSrc,N=e.iconAlt,C=e.homeUrl,R=e.linkTag,S=e.className,A=B(e,["payerId","spaceName","spaceId","children","appName","appAbbr","iconColor","branded","crumbs","feedback","feedbackProps","titleProps","renderRightContent","renderRightClassName","component","tag","clientId","iconSrc","iconAlt","homeUrl","linkTag","className"]),T=D(c,r),q=T[0],$=T[1],F=(x()||{}).loading,G=q||$,U=null;if(r){var L={spaceId:c,payerId:r,className:"d-inline-flex",skeletonProps:{width:180,height:"100%"}};U=$||F?a.a.createElement(X,L):a.a.createElement(Z,{spaceIds:c?[c]:void 0,payerIds:[r],clientId:P},a.a.createElement(X,L))}var J=n||G&&G.name;(c||n)&&(g=[{name:J,url:q&&q.link&&q.link.url?q.link.url:"/web/spaces/spaces/#/"+c}]);var M=Object(t.useMemo)((function(){return a.a.createElement(l.b,Object.assign({appName:p,className:"d-inline-flex flex-shrink-0 "+(r?"mx-3":"")},y))}),[p,y,r]);return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"d-flex align-items-start flex-shrink-0"},a.a.isValidElement(g)?g:a.a.createElement(i.a,{crumbs:g,active:p||u,homeUrl:C,linkTag:R}),k),a.a.createElement("div",Object.assign({className:s()("page-header page-header-brand d-flex justify-content-between align-items-end",S),"data-testid":"page-header"},A),a.a.createElement(I,Object.assign({className:s()("page-header-title page-header-left d-flex align-items-center mb-0",O),"data-testid":"page-header-title"},h),!r&&d&&a.a.createElement(o.a,{className:"mr-2","data-testid":"page-header-app-icon",color:f,branded:m,title:p,src:E,alt:N},d),u||a.a.createElement("h1",{className:"mb-0"},p)),j?a.a.createElement(j,{className:w,payerLogo:U,feedback:M}):a.a.createElement("div",{className:"page-header-left d-flex flex-wrap flex-md-nowrap flex-grow align-items-end justify-content-end"},b&&M,U)))};K.defaultProps={tag:"div",spaceId:null,payerId:null,homeUrl:"/public/apps/dashboard",titleProps:{},renderRightClassName:"page-header-left d-flex flex-wrap flex-md-nowrap flex-grow align-items-end justify-content-end"};var z=K;r.default=z}}]);
//# sourceMappingURL=8-e2d89e64bb61f5abbef5.js.map