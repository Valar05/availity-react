(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1408:function(e,r,n){"use strict";n.r(r);n(14),n(337),n(66),n(6),n(5),n(3),n(7);var t=n(1),a=n.n(t),s=n(8),c=n.n(s),i=n(468),o=n(467),l=n(466),u=(n(28),n(24),n(11),n(324)),p=n.n(u),d=(n(326),n(341)),f=n(374);function m(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function g(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?m(n,!0).forEach((function(r){b(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function b(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var v={spaces:[],loading:!0,error:null},y={SPACES:function(e,r){return{spaces:r.spaces||[],error:null,loading:!1}},ERROR:function(e,r){return g({},e,{loading:!1,error:r.error})},LOADING:function(e,r){var n=r.loading;return g({},e,{loading:void 0!==n?n:!e.loading})}},h=function(e,r){return y[r.type](e,r)};function O(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function w(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?O(n,!0).forEach((function(r){k(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(n).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function k(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function P(e,r,n,t,a,s,c){try{var i=e[s](c),o=i.value}catch(l){return void n(l)}i.done?r(o):Promise.resolve(o).then(t,a)}function I(e){return function(){var r=this,n=arguments;return new Promise((function(t,a){var s=e.apply(r,n);function c(e){P(s,t,a,c,i,"next",e)}function i(e){P(s,t,a,c,i,"throw",e)}c(void 0)}))}}var j=function(){var e=I(p.a.mark((function e(r,n,t,a){var s,c,i,o,l,u,f;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a&&(a=[]),n){e.next=3;break}throw new Error("clientId is required");case 3:return e.next=5,d.d.create({query:r,variables:t},{headers:{"X-Client-ID":n}});case 5:if(s=e.sent,c=s.data.data.spaces,i=c.totalCount,o=c.page,l=c.perPage,u=a.concat(c.spaces),!(i>o*l)){e.next=12;break}return f=w({},t,{page:o+1}),e.abrupt("return",j(r,n,f,u));case 12:return e.abrupt("return",u);case 13:case"end":return e.stop()}}),e)})));return function(r,n,t,a){return e.apply(this,arguments)}}(),x=Object(t.createContext)(),E=function(){return Object(t.useContext)(x)},N=function(e){var r=e.query,n=e.variables,s=e.clientId,c=e.spaceIds,i=e.payerIds,o=e.children,l=e.spaces,u=Object(t.useReducer)(h,v),d=u[0],m=d.spaces,g=d.loading,b=d.error,y=u[1];Object(f.a)(I(p.a.mark((function e(){var t,a,o,u,d,f,g;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,y({type:"LOADING",loading:!0}),t=c.filter((function(e,r){return c.indexOf(e)===r})).filter((function(e){return!m.some((function(r){return r&&r.id===e}))})).filter((function(e){return!l.some((function(r){return r&&r.id===e}))})),a=i.filter((function(e,r){return i.indexOf(e)===r})).filter((function(e){return!m.some((function(r){return r&&r.payerIDs&&r.payerIDs.some((function(r){return r===e}))}))})).filter((function(e){return!l.some((function(r){return r&&r.payerIDs&&r.payerIDs.some((function(r){return r===e}))}))})),o=[],!(t.length>0)){e.next=11;break}return u=w({},n,{ids:t}),e.next=9,j(r,s,u,m);case 9:d=e.sent,o=o.concat(d);case 11:if(!(a.length>0)){e.next=17;break}return f=w({},n,{payerIDs:a}),e.next=15,j(r,s,f,m);case 15:g=e.sent,o=o.concat(g);case 17:y({type:"SPACES",spaces:o}),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),y({type:"ERROR",error:e.t0.message});case 23:case"end":return e.stop()}}),e,null,[[0,20]])}))),[i,c]);var O=function(e){var r=["images","metadata","colors","icons","mapping"];return e.reduce((function(e,n){return r.forEach((function(e){n[e]&&Array.isArray(n[e])&&(n[e]=n[e].reduce((function(e,r){var n=r.name,t=r.value;return e[n]=t,e}),{}))})),e.push(n),e}),[])}(m.concat(l));return a.a.createElement(x.Provider,{value:{spaces:O,loading:g,error:b}},"function"==typeof o?o({spaces:O,loading:g,error:b}):o)},D=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=Object(t.useContext)(x)||{},s=a.spaces,c=void 0===s?[]:s,i=!r||0===r.length,o=r&&1===r.length&&void 0===r[0];o&&c.length>1&&console.warn("You did not pass an ID in to find a space, and there is more than 1 space in the space array. Returning all.");var l=i||o;if(l)return c;var u=r.map((function(e){var r=c.filter((function(r){return r.id===e}))[0];r||(r=c.filter((function(r){return(r.payerIDs||[]).some((function(r){return r===e}))}))[0]);return r}));return u};N.defaultProps={query:"\n    query($ids: [String!], $payerIDs: [String!], $types: [String!], $page: Int){\n      spaces(ids: $ids, payerIDs: $payerIDs, types: $types, page: $page){\n        totalCount\n        perPage\n        page\n        spaces{\n          id\n          name\n          description\n          link {\n            url\n          }\n          payerIDs\n          parentIDs\n          metadata{\n            name\n            value\n          }\n          images{\n            name\n            value\n          }\n          url\n        }\n      }\n    }\n  ",variables:{types:["space"]},spaceIds:[],payerIds:[],spaces:[]};var C=N,S=n(444),R=n.n(S),A=n(443),T=n.n(A),$=n(137),q=n.n($);function U(e,r){if(null==e)return{};var n,t,a={},s=Object.keys(e);for(t=0;t<s.length;t++)n=s[t],r.indexOf(n)>=0||(a[n]=e[n]);return a}var L=function(e){var r=e.skeletonProps,n=U(e,["skeletonProps"]);return a.a.createElement("span",n,a.a.createElement(R.a,r))};L.defaultProps={skeletonProps:{height:"100%"}};var G=function(e){var r=e.spaceId,n=e.payerId,t=e.imageType,s=e.fallback,c=e.skeletonProps,i=U(e,["spaceId","payerId","imageType","fallback","skeletonProps"]),o=D(r||n)[0],l=void 0===o?{}:o,u=(E()||{}).loading,p=r||n||l.id,d=q()(l,t);return!d&&u?a.a.createElement(L,Object.assign({"data-testid":"space-"+t+"-"+p+"-loading",skeletonProps:c},i)):(d||u||!s||(d=s),d&&p?a.a.createElement(T.a,Object.assign({"data-testid":"space-"+t+"-"+p,src:d,alt:"Space "+t,loader:a.a.createElement(L,Object.assign({"data-testid":"space-"+t+"-"+p,skeletonProps:c},i))},i)):null)};G.defaultProps={imageType:"url"};G.create=function(e){var r,n=function(r){return a.a.createElement(G,Object.assign({},e,r))};return n.displayName="Spaces"+((r=e.imageType)&&r.charAt(0).toUpperCase()+r.slice(1)),n};var J=G,F=n(388),M=n(411),V=n.n(M);var X=function(e){var r=e.styled,n=e.spaceId,t=e.markdown,s=function(e,r){if(null==e)return{};var n,t,a={},s=Object.keys(e);for(t=0;t<s.length;t++)n=s[t],r.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["styled","spaceId","markdown"]),c=D(n)[0],i=void 0===c?{}:c,o=i.description;if(o){var l=t?a.a.createElement(V.a,{source:o}):o;return a.a.createElement(F.b,Object.assign({"data-testid":"spaces-disclaimer-"+(n||i.id),styled:r},s),l)}return null};X.defaultProps={markdown:!1};var Y=function(e){var r=e.spaceId,n=e.markdown,t=function(e,r){if(null==e)return{};var n,t,a={},s=Object.keys(e);for(t=0;t<s.length;t++)n=s[t],r.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["spaceId","markdown"]),s=D(r)[0],c=void 0===s?{}:s,i=c.description;if(i){var o=n?a.a.createElement(V.a,{source:i}):i;return a.a.createElement(F.a,Object.assign({"data-testid":"spaces-agreement-"+(r||c.id)},t),o)}return null};Y.defaultProps={markdown:!1};var z=J.create({imageType:"images.logo"}),B=(J.create({imageType:"images.tile"}),J.create({imageType:"images.billboard"}),C);function H(e,r){if(null==e)return{};var n,t,a={},s=Object.keys(e);for(t=0;t<s.length;t++)n=s[t],r.indexOf(n)>=0||(a[n]=e[n]);return a}var K=function(e){var r=e.payerId,n=e.spaceName,s=e.spaceId,u=e.children,p=e.appName,d=e.appAbbr,f=e.iconColor,m=e.branded,g=e.crumbs,b=e.feedback,v=e.feedbackProps,y=e.titleProps,h=y.className,O=H(y,["className"]),w=e.renderRightContent,k=e.renderRightClassName,P=e.component,I=e.tag,j=e.clientId,x=e.iconSrc,N=e.iconAlt,C=e.homeUrl,S=e.linkTag,R=e.className,A=H(e,["payerId","spaceName","spaceId","children","appName","appAbbr","iconColor","branded","crumbs","feedback","feedbackProps","titleProps","renderRightContent","renderRightClassName","component","tag","clientId","iconSrc","iconAlt","homeUrl","linkTag","className"]),T=D(s,r),$=T[0],q=T[1],U=(E()||{}).loading,L=$||q,G=null;if(r){var J={spaceId:s,payerId:r,className:"d-inline-flex",skeletonProps:{width:180,height:"100%"}};G=q||U?a.a.createElement(z,J):a.a.createElement(B,{spaceIds:s?[s]:void 0,payerIds:[r],clientId:j},a.a.createElement(z,J))}var F=n||L&&L.name;(s||n)&&(g=[{name:F,url:$&&$.link&&$.link.url?$.link.url:"/web/spaces/spaces/#/"+s}]);var M=Object(t.useMemo)((function(){return a.a.createElement(l.b,Object.assign({appName:p,className:"d-inline-flex flex-shrink-0 "+(r?"mx-3":"")},v))}),[p,v,r]);return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"d-flex align-items-start"},a.a.isValidElement(g)?g:a.a.createElement(i.a,{crumbs:g,active:p||u,homeUrl:C,linkTag:S}),P),a.a.createElement("div",Object.assign({className:c()("page-header page-header-brand d-flex justify-content-between align-items-end",R),"data-testid":"page-header"},A),a.a.createElement(I,Object.assign({className:c()("page-header-title page-header-left d-flex align-items-center mb-0",h),"data-testid":"page-header-title"},O),!r&&d&&a.a.createElement(o.a,{className:"mr-2","data-testid":"page-header-app-icon",color:f,branded:m,title:p,src:x,alt:N},d),u||a.a.createElement("h1",{className:"mb-0"},p)),w?a.a.createElement(w,{className:k,payerLogo:G,feedback:M}):a.a.createElement("div",{className:"page-header-left d-flex flex-wrap flex-md-nowrap flex-grow align-items-end justify-content-end"},b&&M,G)))};K.defaultProps={tag:"div",spaceId:null,payerId:null,homeUrl:"/public/apps/dashboard",titleProps:{},renderRightClassName:"page-header-left d-flex flex-wrap flex-md-nowrap flex-grow align-items-end justify-content-end"};var Q=K;r.default=Q}}]);
//# sourceMappingURL=8-339a4e6c858fe2c80957.js.map