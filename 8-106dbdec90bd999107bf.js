(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{mIeF:function(e,r,n){"use strict";n.r(r);n("1c7q"),n("Zrjq"),n("jr56"),n("abGl"),n("gZHo"),n("Fdmb"),n("Ir+3");var t=n("mXGw"),a=n.n(t),s=n("8Jek"),c=n.n(s),i=n("eFpI"),o=n("RnEY"),l=n("oG6R"),p=(n("wDqy"),n("yvkl"),n("NthX")),u=n.n(p),d=(n("wcNg"),n("bHFo")),f=n("Mblp");function m(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function g(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?m(n,!0).forEach((function(r){b(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function b(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var y={spaces:[],loading:!0,error:null},v={SPACES:function(e,r){return{spaces:r.spaces||[],error:null,loading:!1}},ERROR:function(e,r){return g({},e,{loading:!1,error:r.error})},LOADING:function(e,r){var n=r.loading;return g({},e,{loading:void 0!==n?n:!e.loading})}},O=function(e,r){return v[r.type](e,r)};function h(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function w(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?h(n,!0).forEach((function(r){j(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function j(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var I=function e(r,n,t,a){var s,c,i,o,l,p,f;return u.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:if(void 0===a&&(a=[]),n){m.next=3;break}throw new Error("clientId is required");case 3:return m.next=5,u.a.awrap(d.d.create({query:r,variables:t},{headers:{"X-Client-ID":n}}));case 5:if(s=m.sent,c=s.data.data.spaces,i=c.totalCount,o=c.page,l=c.perPage,p=a.concat(c.spaces),!(i>o*l)){m.next=12;break}return f=w({},t,{page:o+1}),m.abrupt("return",e(r,n,f,p));case 12:return m.abrupt("return",p);case 13:case"end":return m.stop()}}))},k=Object(t.createContext)(),P=function(){return Object(t.useContext)(k)},E=function(e){var r=e.query,n=e.variables,s=e.clientId,c=e.spaceIds,i=e.payerIds,o=e.children,l=e.spaces,p=Object(t.useReducer)(O,y),d=p[0],m=d.spaces,g=d.loading,b=d.error,v=p[1];Object(f.a)((function(){var e,t,a,o,p,d,f;return u.a.async((function(g){for(;;)switch(g.prev=g.next){case 0:if(g.prev=0,v({type:"LOADING",loading:!0}),e=c.filter((function(e,r){return c.indexOf(e)===r})).filter((function(e){return!m.some((function(r){return r&&r.id===e}))})).filter((function(e){return!l.some((function(r){return r&&r.id===e}))})),t=i.filter((function(e,r){return i.indexOf(e)===r})).filter((function(e){return!m.some((function(r){return r&&r.payerIDs&&r.payerIDs.some((function(r){return r===e}))}))})).filter((function(e){return!l.some((function(r){return r&&r.payerIDs&&r.payerIDs.some((function(r){return r===e}))}))})),a=[],!(e.length>0)){g.next=11;break}return o=w({},n,{ids:e}),g.next=9,u.a.awrap(I(r,s,o,m));case 9:p=g.sent,a=a.concat(p);case 11:if(!(t.length>0)){g.next=17;break}return d=w({},n,{payerIDs:t}),g.next=15,u.a.awrap(I(r,s,d,m));case 15:f=g.sent,a=a.concat(f);case 17:v({type:"SPACES",spaces:a}),g.next=23;break;case 20:g.prev=20,g.t0=g.catch(0),v({type:"ERROR",error:g.t0.message});case 23:case"end":return g.stop()}}),null,null,[[0,20]])}),[i,c]);var h=function(e){var r=["images","metadata","colors","icons","mapping"];return e.reduce((function(e,n){return r.forEach((function(e){n[e]&&Array.isArray(n[e])&&(n[e]=n[e].reduce((function(e,r){var n=r.name,t=r.value;return e[n]=t,e}),{}))})),e.push(n),e}),[])}(m.concat(l));return a.a.createElement(k.Provider,{value:{spaces:h,loading:g,error:b}},"function"==typeof o?o({spaces:h,loading:g,error:b}):o)},x=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=Object(t.useContext)(k)||{},s=a.spaces,c=void 0===s?[]:s,i=!r||0===r.length,o=r&&1===r.length&&void 0===r[0];o&&c.length>1&&console.warn("You did not pass an ID in to find a space, and there is more than 1 space in the space array. Returning all.");var l=i||o;if(l)return c;var p=r.map((function(e){var r=c.filter((function(r){return r.id===e}))[0];r||(r=c.filter((function(r){return(r.payerIDs||[]).some((function(r){return r===e}))}))[0]);return r}));return p};E.defaultProps={query:"\n    query($ids: [String!], $payerIDs: [String!], $types: [String!], $page: Int){\n      spaces(ids: $ids, payerIDs: $payerIDs, types: $types, page: $page){\n        totalCount\n        perPage\n        page\n        spaces{\n          id\n          name\n          description\n          link {\n            url\n          }\n          payerIDs\n          parentIDs\n          metadata{\n            name\n            value\n          }\n          images{\n            name\n            value\n          }\n          url\n        }\n      }\n    }\n  ",variables:{types:["space"]},spaceIds:[],payerIds:[],spaces:[]};var N=E,D=n("FpsE"),C=n.n(D),R=n("RnPE"),S=n.n(R),A=n("BjK/"),T=n.n(A);function q(e,r){if(null==e)return{};var n,t,a={},s=Object.keys(e);for(t=0;t<s.length;t++)n=s[t],r.indexOf(n)>=0||(a[n]=e[n]);return a}var $=function(e){var r=e.skeletonProps,n=q(e,["skeletonProps"]);return a.a.createElement("span",n,a.a.createElement(C.a,r))};$.defaultProps={skeletonProps:{height:"100%"}};var F=function(e){var r=e.spaceId,n=e.payerId,t=e.imageType,s=e.fallback,c=e.skeletonProps,i=q(e,["spaceId","payerId","imageType","fallback","skeletonProps"]),o=x(r||n)[0],l=void 0===o?{}:o,p=(P()||{}).loading,u=r||n||l.id,d=T()(l,t);return!d&&p?a.a.createElement($,Object.assign({"data-testid":"space-"+t+"-"+u+"-loading",skeletonProps:c},i)):(d||p||!s||(d=s),d&&u?a.a.createElement(S.a,Object.assign({"data-testid":"space-"+t+"-"+u,src:d,alt:"Space "+t,loader:a.a.createElement($,Object.assign({"data-testid":"space-"+t+"-"+u,skeletonProps:c},i))},i)):null)};F.defaultProps={imageType:"url"};F.create=function(e){var r,n=function(r){return a.a.createElement(F,Object.assign({},e,r))};return n.displayName="Spaces"+((r=e.imageType)&&r.charAt(0).toUpperCase()+r.slice(1)),n};var G=F,U=n("m1fY"),L=n("LO0j"),J=n.n(L);var X=function(e){var r=e.styled,n=e.spaceId,t=e.markdown,s=function(e,r){if(null==e)return{};var n,t,a={},s=Object.keys(e);for(t=0;t<s.length;t++)n=s[t],r.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["styled","spaceId","markdown"]),c=x(n)[0],i=void 0===c?{}:c,o=i.description;if(o){var l=t?a.a.createElement(J.a,{source:o}):o;return a.a.createElement(U.b,Object.assign({"data-testid":"spaces-disclaimer-"+(n||i.id),styled:r},s),l)}return null};X.defaultProps={markdown:!1};var Y=function(e){var r=e.spaceId,n=e.markdown,t=function(e,r){if(null==e)return{};var n,t,a={},s=Object.keys(e);for(t=0;t<s.length;t++)n=s[t],r.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["spaceId","markdown"]),s=x(r)[0],c=void 0===s?{}:s,i=c.description;if(i){var o=n?a.a.createElement(J.a,{source:i}):i;return a.a.createElement(U.a,Object.assign({"data-testid":"spaces-agreement-"+(r||c.id)},t),o)}return null};Y.defaultProps={markdown:!1};var H=G.create({imageType:"images.logo"}),M=(G.create({imageType:"images.tile"}),G.create({imageType:"images.billboard"}),N);function Z(e,r){if(null==e)return{};var n,t,a={},s=Object.keys(e);for(t=0;t<s.length;t++)n=s[t],r.indexOf(n)>=0||(a[n]=e[n]);return a}var B=function(e){var r=e.payerId,n=e.spaceName,s=e.spaceId,p=e.children,u=e.appName,d=e.appAbbr,f=e.iconColor,m=e.branded,g=e.crumbs,b=e.feedback,y=e.feedbackProps,v=e.titleProps,O=v.className,h=Z(v,["className"]),w=e.renderRightContent,j=e.renderRightClassName,I=e.component,k=e.tag,E=e.clientId,N=e.iconSrc,D=e.iconAlt,C=e.homeUrl,R=e.linkTag,S=e.className,A=Z(e,["payerId","spaceName","spaceId","children","appName","appAbbr","iconColor","branded","crumbs","feedback","feedbackProps","titleProps","renderRightContent","renderRightClassName","component","tag","clientId","iconSrc","iconAlt","homeUrl","linkTag","className"]),T=x(s,r),q=T[0],$=T[1],F=(P()||{}).loading,G=q||$,U=null;if(r){var L={spaceId:s,payerId:r,className:"d-inline-flex",skeletonProps:{width:180,height:"100%"}};U=$||F?a.a.createElement(H,L):a.a.createElement(M,{spaceIds:s?[s]:void 0,payerIds:[r],clientId:E},a.a.createElement(H,L))}var J=n||G&&G.name;(s||n)&&(g=[{name:J,url:q&&q.link&&q.link.url?q.link.url:"/web/spaces/spaces/#/"+s}]);var X=Object(t.useMemo)((function(){return a.a.createElement(l.b,Object.assign({appName:u,className:"d-inline-flex flex-shrink-0 "+(r?"mx-3":"")},y))}),[u,y,r]);return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"d-flex align-items-start flex-shrink-0"},a.a.isValidElement(g)?g:a.a.createElement(i.a,{crumbs:g,active:u||p,homeUrl:C,linkTag:R}),I),a.a.createElement("div",Object.assign({className:c()("page-header page-header-brand d-flex justify-content-between align-items-end",S),"data-testid":"page-header"},A),a.a.createElement(k,Object.assign({className:c()("page-header-title page-header-left d-flex align-items-center mb-0",O),"data-testid":"page-header-title"},h),!r&&d&&a.a.createElement(o.a,{className:"mr-2","data-testid":"page-header-app-icon",color:f,branded:m,title:u,src:N,alt:D},d),p||a.a.createElement("h1",{className:"mb-0"},u)),w?a.a.createElement(w,{className:j,payerLogo:U,feedback:X}):a.a.createElement("div",{className:"page-header-left d-flex flex-wrap flex-md-nowrap flex-grow align-items-end justify-content-end"},b&&X,U)))};B.defaultProps={tag:"div",spaceId:null,payerId:null,homeUrl:"/public/apps/dashboard",titleProps:{},renderRightClassName:"page-header-left d-flex flex-wrap flex-md-nowrap flex-grow align-items-end justify-content-end"};var K=B;r.default=K}}]);
//# sourceMappingURL=8-106dbdec90bd999107bf.js.map